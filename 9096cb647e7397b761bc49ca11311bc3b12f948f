{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7468867e_62d82546",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 7,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2023-08-01T13:15:12Z",
      "side": 1,
      "message": "nit: this is a change for security rather than optimisation?",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 21
      },
      "revId": "9096cb647e7397b761bc49ca11311bc3b12f948f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3d8fecc_257f7a6d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 7,
      "author": {
        "id": 2026021
      },
      "writtenOn": "2023-08-02T07:20:49Z",
      "side": 1,
      "message": "Thanks for your advice, I modified the title of this change.",
      "parentUuid": "7468867e_62d82546",
      "range": {
        "startLine": 7,
        "startChar": 13,
        "endLine": 7,
        "endChar": 21
      },
      "revId": "9096cb647e7397b761bc49ca11311bc3b12f948f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73cdd4f3_399ec13a",
        "filename": "apps/weaver/card/src/com/android/weaver/core/CoreSlots.java",
        "patchSetId": 6
      },
      "lineNbr": 173,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2023-08-01T13:15:12Z",
      "side": 1,
      "message": "Is there a concern with the constant time compare? If not, could the result of the compare be used to increment `mFailureCount` by 1 or 0?",
      "range": {
        "startLine": 173,
        "startChar": 19,
        "endLine": 173,
        "endChar": 64
      },
      "revId": "9096cb647e7397b761bc49ca11311bc3b12f948f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f893a37_a4de6124",
        "filename": "apps/weaver/card/src/com/android/weaver/core/CoreSlots.java",
        "patchSetId": 6
      },
      "lineNbr": 173,
      "author": {
        "id": 2026021
      },
      "writtenOn": "2023-08-02T07:20:49Z",
      "side": 1,
      "message": "Do you mean to try to ensure that in both cases, the running time of the code should be constant time?I\u0027m not sure if my understanding is correct, if so, I made a modification, you can see if it is more suitable.\n\nAnd there is another problem. I think result needs to be Consts.READ_WRONG_KEY by default while increasing the number of failures. When throttle returns true, set it to Consts.READ_BACK_OFF. Please review it. The purpose is to be consistent with change 2674855.\n\nThanks very much",
      "parentUuid": "73cdd4f3_399ec13a",
      "range": {
        "startLine": 173,
        "startChar": 19,
        "endLine": 173,
        "endChar": 64
      },
      "revId": "9096cb647e7397b761bc49ca11311bc3b12f948f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8bac384_75186148",
        "filename": "apps/weaver/card/src/com/android/weaver/core/CoreSlots.java",
        "patchSetId": 6
      },
      "lineNbr": 173,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2023-08-02T13:57:13Z",
      "side": 1,
      "message": "I\u0027m rusty on the javacard APIs so I\u0027m adding a reviewers who will have more context. I was asking whether the comparison, failure count update and timer starting can all be done in constant time. However, the generic javacard docs don\u0027t seem to be making any guarantees about constant time which would mean it depends on the implementation.\n\nWith this change, any attempt is treated as a failure until it proves to be successful so all probing attempts will throttle.\n\nThere still might need to be some changes to ensure the comparison is constant time so that probing attacks can\u0027t side channel the comparison, even if those will be throttled?",
      "parentUuid": "8f893a37_a4de6124",
      "range": {
        "startLine": 173,
        "startChar": 19,
        "endLine": 173,
        "endChar": 64
      },
      "revId": "9096cb647e7397b761bc49ca11311bc3b12f948f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6c4eb00_ddc29584",
        "filename": "apps/weaver/card/src/com/android/weaver/core/CoreSlots.java",
        "patchSetId": 6
      },
      "lineNbr": 173,
      "author": {
        "id": 2026021
      },
      "writtenOn": "2023-08-03T06:53:06Z",
      "side": 1,
      "message": "I know what you mean. I think that considering whether the comparison time is a constant is another security issue that needs to be considered. Based on this change, I pushed another change 2691420 for this issue. Please review it.\n\nThis change is only used to put the failure count increment in front. After all, this code also used Util.arrayCompare before.\n\nThanks",
      "parentUuid": "a8bac384_75186148",
      "range": {
        "startLine": 173,
        "startChar": 19,
        "endLine": 173,
        "endChar": 64
      },
      "revId": "9096cb647e7397b761bc49ca11311bc3b12f948f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}