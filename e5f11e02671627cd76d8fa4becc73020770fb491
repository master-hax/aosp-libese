{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "04196991_a440c27f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1960460
      },
      "writtenOn": "2022-12-08T01:09:08Z",
      "side": 1,
      "message": "A couple of comments :\n\n1. Almost no comments anywhere in the code base, can you please add comments so its readable (hard to do the review of something this huge without comments).\n2. Notice the use of a lot of magic numbers like  128,96.8, should those be defines ? easier to read and maintain\n\n\n if (KMInteger.cast(macLength).getSignificantShort() !\u003d 0\n            || KMInteger.cast(macLength).getShort() \u003e 128\n            || KMInteger.cast(macLength).getShort() \u003c 96\n            || (KMInteger.cast(macLength).getShort() % 8) !\u003d 0) {\n          KMException.throwIt(KMError.UNSUPPORTED_MIN_MAC_LENGTH);\n        }",
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ec93a0c_a2faff39",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "I\u0027ve only reviewed a little of this, but I have a lot of comments (most of which I didn\u0027t actually write yet). I think the best way to move forward is to land this as-is, then follow up with changes.",
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0487e766_216a3c81",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested by you. I will mark the comments as resolved and address all of the comments once this CL is submitted.",
      "parentUuid": "3ec93a0c_a2faff39",
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41060b07_859095b1",
        "filename": "ready_se/google/keymint/KM200/Applet/README.md",
        "patchSetId": 8
      },
      "lineNbr": 1,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "Is there a design doc, listing all of the supported commands, etc.?  If so, it\u0027d be good to add it as a text file.",
      "range": {
        "startLine": 1,
        "startChar": 20,
        "endLine": 1,
        "endChar": 26
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27420549_1b1c4017",
        "filename": "ready_se/google/keymint/KM200/Applet/README.md",
        "patchSetId": 8
      },
      "lineNbr": 1,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "41060b07_859095b1",
      "range": {
        "startLine": 1,
        "startChar": 20,
        "endLine": 1,
        "endChar": 26
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e777ffd3_53fb1da0",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMEncoder.java",
        "patchSetId": 8
      },
      "lineNbr": 25,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "Missing Javadoc.",
      "range": {
        "startLine": 25,
        "startChar": 13,
        "endLine": 25,
        "endChar": 22
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "680c0384_5ea559e7",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMEncoder.java",
        "patchSetId": 8
      },
      "lineNbr": 25,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "e777ffd3_53fb1da0",
      "range": {
        "startLine": 25,
        "startChar": 13,
        "endLine": 25,
        "endChar": 22
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d416672_04c4b485",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "This whole section needs more documentation, specifying the purpose and meaning of each group of constants. Perhaps that should be added in the future, though.",
      "range": {
        "startLine": 42,
        "startChar": 5,
        "endLine": 42,
        "endChar": 14
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "36ae4309_a85086c9",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "3d416672_04c4b485",
      "range": {
        "startLine": 42,
        "startChar": 5,
        "endLine": 42,
        "endChar": 14
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9238281_4518a18e",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 59,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "Nit: ckdfLabel (spelling)",
      "range": {
        "startLine": 59,
        "startChar": 29,
        "endLine": 59,
        "endChar": 38
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b0a105a7_e595afda",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 59,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "b9238281_4518a18e",
      "range": {
        "startLine": 59,
        "startChar": 29,
        "endLine": 59,
        "endChar": 38
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d67afac5_938c5dda",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 78,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "I see 38 (CUSTOM_TAGS), why 40?  Shouldn\u0027t it be 39?\n\nNit: I\u0027d move DATA_ARRAY_SIZE to the bottom of the list, to help keep the size in sync with the contents.  It would also be nice to add a block comment explaining the high-level purpose of this data array.",
      "range": {
        "startLine": 78,
        "startChar": 45,
        "endLine": 78,
        "endChar": 48
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c51f1034_fc7bb80e",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 78,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "d67afac5_938c5dda",
      "range": {
        "startLine": 78,
        "startChar": 45,
        "endLine": 78,
        "endChar": 48
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57c7a360_ac6da053",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 416,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "Why bother with this?  You\u0027re always going to generate 2048 bit, with pub exp F4, so just do it.  To pass the tests you might need to diagnose an error for other requests, but that can be done in the HAL with no loss of security.",
      "range": {
        "startLine": 416,
        "startChar": 4,
        "endLine": 416,
        "endChar": 18
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df52ff44_3d0c404d",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 416,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "57c7a360_ac6da053",
      "range": {
        "startLine": 416,
        "startChar": 4,
        "endLine": 416,
        "endChar": 18
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e90e189_8642f15f",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 439,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "As above, why do this here?  Do it in the HAL service.  If an attacker bypasses or subverts the HAL and sends an invalid size it may provoke an exception, or it may work, but in no case will it cause a security problem.\n\nThe TA should only bother validating and enforcing security-relevant constraints. Other stuff is just extra code size and run-time latency.",
      "range": {
        "startLine": 436,
        "startChar": 1,
        "endLine": 439,
        "endChar": 5
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae7dbf25_0e42dbb8",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 439,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "4e90e189_8642f15f",
      "range": {
        "startLine": 436,
        "startChar": 1,
        "endLine": 439,
        "endChar": 5
      },
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff40c584_d3945280",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 707,
      "author": {
        "id": 1043663
      },
      "writtenOn": "2022-12-08T04:42:23Z",
      "side": 1,
      "message": "Why copy the data into a scratch pad?  Why not just pass in the KDF and feed it to that?",
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11f7f00b_7a4d8b55",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 8
      },
      "lineNbr": 707,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-12-10T20:31:31Z",
      "side": 1,
      "message": "As suggested, I will address this in a separate CL.",
      "parentUuid": "ff40c584_d3945280",
      "revId": "e5f11e02671627cd76d8fa4becc73020770fb491",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}