{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "99b667b4_962ef446",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProvider/src/com/android/javacard/keymaster/KMAndroidSEApplet.java",
        "patchSetId": 4
      },
      "lineNbr": 521,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501\n\nAre these empty overrides necessary?  I suppose they may get optimized out anyway...",
      "range": {
        "startLine": 516,
        "startChar": 2,
        "endLine": 521,
        "endChar": 3
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d03abcc_1655fa1e",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProvider/src/com/android/javacard/keymaster/KMAndroidSEApplet.java",
        "patchSetId": 4
      },
      "lineNbr": 531,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501:\n\nWhy use methods for these?  Wouldn\u0027t constants do the job, and be more space-efficient?  Again, I suppose the compiler may be smart enough to optimize the overhead out.\n\nPrevious: (The comment was for these two functions)\n\n  private short computePrimitveDataSize() {\n    // provisionStatus + keymasterState\n    return (short) 2;\n  }\n\n  private short computeObjectCount() {\n    return (short) 0;\n  }",
      "range": {
        "startLine": 531,
        "startChar": 0,
        "endLine": 531,
        "endChar": 0
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1188df90_53bb189d",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProviderLib/src/com/android/javacard/seprovider/KMAESKey.java",
        "patchSetId": 4
      },
      "lineNbr": 36,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501:\n\nI wonder if it\u0027s worthwhile to follow \"proper\" OO design here, rather than just making the aesKey a public member. The cumulative size impact of these getters and setters is non-trivial.",
      "range": {
        "startLine": 30,
        "startChar": 1,
        "endLine": 36,
        "endChar": 3
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71cf8497_509147ca",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProviderLib/src/com/android/javacard/seprovider/KMAndroidSEProvider.java",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501:\n\nOne general comment:  I\u0027ve known for a long time that you had to do a lot of pre-allocation of persistent objects for each of the operation slots, but reading this code has really driven it home.  Is there not some way we can avoid that by using transient operation contents?  I realize that doing that would mean that in the event the SE is power-cycled the operation contents would be lost, but is in-operation SE resetting really that common? If so, can we change something on the system side to reduce it to an acceptable level? All of this persistent pre-allocation is not only expensive in terms of flash storage, it also creates a lot of flash wear and has to really slow down operations. Dynamic allocation of transient space would consume even more-precious RAM, but we could only allocate the specific Cipher/Signature object required.  Or can those objects not be transient?",
      "range": {
        "startLine": 42,
        "startChar": 13,
        "endLine": 42,
        "endChar": 32
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f86b266_1885c83c",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProviderLib/src/com/android/javacard/seprovider/KMPoolManager.java",
        "patchSetId": 4
      },
      "lineNbr": 188,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501\n\nNit:  This should probably be a constant.  It\u0027s possible we could increase it in the future.\n\nPrevious:\ncipherPool \u003d new Object[(short) (CIPHER_ALGS.length * 4)];",
      "range": {
        "startLine": 188,
        "startChar": 58,
        "endLine": 188,
        "endChar": 81
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e75bec0_e353564b",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProviderLib/src/com/android/javacard/seprovider/KMPoolManager.java",
        "patchSetId": 4
      },
      "lineNbr": 222,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501\n\nNit:\n\nWhy not for(short index \u003d 0; index \u003c 4; ++index)? The for loop is a bit more compact and quite a bit more idiomatic than this totally-equivalent while construction.\n\nPrevious:\nwhile (index \u003c 4) {",
      "range": {
        "startLine": 222,
        "startChar": 4,
        "endLine": 222,
        "endChar": 68
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "999281f5_b5831ce7",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProviderLib/src/com/android/javacard/seprovider/KMPoolManager.java",
        "patchSetId": 4
      },
      "lineNbr": 469,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501:\nIt\u0027s not clear to me why you\u0027re using a pooled dynamic allocation here, given that the allocated instances are persistent.  You\u0027re going to eventually allocate four of everything, so why not just pre-allocate them all?  If they were transient, that would be different.  As it is, it seems like a lot of needless complexity (and this method is complex and hard to follow -- if it really is necessary it should probably be rewritten to simplify the logic and make it easier to understand).",
      "range": {
        "startLine": 469,
        "startChar": 21,
        "endLine": 469,
        "endChar": 37
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04a69875_c5fc1d52",
        "filename": "ready_se/google/keymint/KM200/Applet/AndroidSEProviderLib/src/com/android/javacard/seprovider/KMPoolManager.java",
        "patchSetId": 4
      },
      "lineNbr": 493,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from swillden@ on Abandoned CL: aosp/1833501:\n\nNit:  This double-assignment is not only hard to read, it potentially results in duplicated code in the binary (depending on the effectiveness of the optimizer).  Also you assign to  object\u0027 just below, so you should just rely on that assignment to initialize object\u0027.\n\nPrevious:\n ((KMInstance) pool[index]).object \u003d object \u003d getCipherInstance(alg);",
      "range": {
        "startLine": 493,
        "startChar": 0,
        "endLine": 493,
        "endChar": 59
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8df88664_1a447766",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 4
      },
      "lineNbr": 456,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from drewry@ on Abandoned CL: aosp/1833501:\nnit: resetTransientBuffers() might be more clarifying since you also deal with tmpVariables\n\nPrevious:\nresetData();",
      "range": {
        "startLine": 456,
        "startChar": 6,
        "endLine": 456,
        "endChar": 27
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a2d1e92_46835e42",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 4
      },
      "lineNbr": 472,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from drewry@ on on Abandoned CL: aosp/1833501:\nloving the cognitive dissonance of sendError(...OK) ;)\n\nPrevious:\nsendError();",
      "range": {
        "startLine": 472,
        "startChar": 10,
        "endLine": 472,
        "endChar": 22
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b992cd22_9d74fa81",
        "filename": "ready_se/google/keymint/KM200/Applet/src/com/android/javacard/keymaster/KMKeymasterApplet.java",
        "patchSetId": 4
      },
      "lineNbr": 783,
      "author": {
        "id": 1887766
      },
      "writtenOn": "2022-07-25T22:33:55Z",
      "side": 1,
      "message": "Comments from drewry@ on aosp/1833501:\nit\u0027d be nice to have a comment (or variable or function helper name) explaining the lengths. E.g., KMInteger.length().\n\nPrevious:\nUtil.arrayFillNonAtomic(scratchPad, (short) 0, (short) 8, (byte) 0);",
      "range": {
        "startLine": 783,
        "startChar": 72,
        "endLine": 783,
        "endChar": 79
      },
      "revId": "5cba7ed30c267a2282668807dbd7acf06e2cd91f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}